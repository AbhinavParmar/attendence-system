package com.shivam.hrms.attendance.attendancesystem;

import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.impl.client.CloseableHttpClient;
import org.json.JSONObject;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.http.HttpResponse;
import org.apache.http.entity.StringEntity;
import com.google.gson.Gson;
import org.apache.http.HttpEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.HttpClientBuilder;

public class FaceDetectionPythonCall {
    public static void main(String args[]) throws IOException {

        String       postUrl       = "http://192.168.5.26:3000/detect_final2";// put in your url
        Gson         gson          = new Gson();
        CloseableHttpClient httpClient = HttpClientBuilder.create().build();
        HttpPost     httpPost          = new HttpPost(postUrl);

        //create a POJO

        //gson.tojson() converts your pojo to json

        //currently Hard coding the request data for httpPost Call directly from method to python script AND
        StringEntity postingString = new StringEntity(gson.toJson(
                new EmployeeAttendance("Unknown Person",
                        "Unknown Dept",
                        "2023-12-28T09:45:21",
                        "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")
                ));

        httpPost.setEntity(postingString);
        httpPost.setHeader("Content-type", "application/json");
        CloseableHttpResponse httpResponse = httpClient.execute(httpPost);

        System.out.println("POST Response Status:: "
                + httpResponse.getStatusLine().getStatusCode());

        BufferedReader reader = new BufferedReader(new InputStreamReader(
                httpResponse.getEntity().getContent()));

        String inputLine;
        StringBuffer response = new StringBuffer();

        while ((inputLine = reader.readLine()) != null) {
            response.append(inputLine);
        }
        reader.close();

        // print result
        System.out.println(response.toString());
        httpClient.close();
    }
}
